<!-- 
<div class="flex flex-wrap w-full h-full">
  <div
    *ngIf="!started"
    class="flex flex-col items-center justify-center top-0 max-w-9/10 p-[24rem] text-center text-white bg-gray-900"
  >
    <h1 class="text-2xl mb-6">What are you working on?</h1>
    <div
      class="flex items-center w-full max-w-2xl bg-gray-800 rounded-full px-4 py-3 shadow-lg"
    >
      <input
        type="text"
        placeholder="Ask anything"
        [(ngModel)]="message"
        (keydown.enter)="sendMessage()"
        class="flex-1 bg-transparent outline-none px-3 text-sm placeholder-gray-400"
      />
    </div>
  </div>

  <div
    *ngIf="started"
    class="flex flex-col h-screen bg-gray-900 ml-40 max-w-9/10 text-white"
  >

    <div
      class="flex-1 overflow-y-auto p-4 space-y-3 mb-24 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900"
      style="max-height: calc(100vh - 5rem)"
    >
      <div
        *ngFor="let msg of messages"
        [ngClass]="msg.sender === 'user' ? 'text-right' : 'text-left'"
      >
        <div
          [ngClass]="msg.sender === 'user'
          ? 'inline-block bg-blue-600 px-4 py-2 rounded-2xl'
          : 'inline-block bg-gray-700 px-4 py-2 rounded-2xl'"
        >
          {{ msg.text }}
        </div>
      </div>
    </div>


    <div class="fixed bottom-5 left-0 right-0 flex justify-center">
      <div
        class="flex items-center w-full max-w-3xl bg-gray-800 text-white rounded-full px-4 py-3 shadow-lg"
      >
        <input
          type="text"
          placeholder="Ask anything"
          [(ngModel)]="message"
          (keydown.enter)="sendMessage()"
          class="flex-1 bg-transparent outline-none px-3 text-sm placeholder-gray-400"
        />
      </div>
    </div>
  </div>
</div> -->
<!-- //-------------------------------------//
<div class="flex flex-wrap w-full h-full">
  <div class="w-full">
    <main class="flex-1 transition-all duration-300 w-full h-full">
      <div class="w-full h-full flex gap-4">

        <div class="bg-white rounded-lg shadow-md p-6 w-3/4 h-full">
          <div
            *ngIf="!started"
            class="flex flex-col items-center justify-center w-full h-full text-center text-gray-800"
          >
            <h1 class="text-2xl mb-6">What are you working on?</h1>
            <div
              class="flex items-center w-full max-w-2xl bg-gray-100 rounded-full px-4 py-3 shadow"
            >
              <input
                type="text"
                placeholder="Ask anything"
                [(ngModel)]="message"
                (keydown.enter)="sendMessage()"
                class="flex-1 bg-transparent outline-none px-3 text-sm placeholder-gray-500"
              />
            </div>
          </div>

          <div *ngIf="started" class="flex flex-col h-full">
 
            <div
              class="flex-1 overflow-y-auto p-4 space-y-3 mb-20 scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200"
              style="max-height: calc(100vh - 10rem)"
            >
              <div
                *ngFor="let msg of messages"
                [ngClass]="msg.sender === 'user' ? 'text-right' : 'text-left'"
              >
                <div
                  [ngClass]="msg.sender === 'user'
                    ? 'inline-block bg-blue-600 text-white px-4 py-2 rounded-2xl'
                    : 'inline-block bg-gray-200 text-gray-800 px-4 py-2 rounded-2xl'"
                >
                  {{ msg.text }}
                </div>
              </div>
            </div>


            <div class="absolute bottom-10 left-0 right-0 flex justify-center">
              <div
                class="flex items-center w-full max-w-3xl bg-gray-100 rounded-full px-4 py-3 shadow"
              >
                <input
                  type="text"
                  placeholder="Ask anything"
                  [(ngModel)]="message"
                  (keydown.enter)="sendMessage()"
                  class="flex-1 bg-transparent outline-none px-3 text-sm placeholder-gray-500"
                />
              </div>
            </div>
          </div>
        </div>


        <div
          class="bg-white rounded-lg shadow-md p-6 hidden md:flex md:flex-col md:w-1/4 md:h-full"
        >
          <div class="flex-1 overflow-auto">
            <div class="font-semibold mb-2">AI Assistant Info</div>
            <ul class="space-y-2">
              <li class="p-2 bg-gray-100 rounded">Session History</li>
              <li class="p-2 bg-gray-100 rounded">Saved Queries</li>
              <li class="p-2 bg-gray-100 rounded">Settings</li>
            </ul>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
//-------------------------------// -->
<!-- <div *ngIf="loading" class="p-6 space-y-4">
  <div
    class="bg-gray-200 animate-pulse rounded-lg h-64 w-full md:w-3/4 mx-auto"
  ></div>
  <div class="bg-gray-200 animate-pulse rounded-lg h-6 w-3/4 mx-auto"></div>
  <div class="bg-gray-200 animate-pulse rounded-lg h-6 w-5/6 mx-auto"></div>
  <div class="bg-gray-200 animate-pulse rounded-lg h-6 w-2/3 mx-auto"></div>
  <div
    class="bg-gray-200 animate-pulse rounded-full h-12 w-full md:w-3/4 mx-auto mt-4"
  ></div>
  <div
    class="hidden md:block bg-gray-200 animate-pulse rounded-lg h-48 w-1/4 absolute top-6 right-6"
  ></div>
</div>

<div *ngIf="!loading">
  <div *ngIf="isPaid; else paySection">

    <div class="flex flex-wrap w-full h-full">
      <div class="w-full">
        <main class="flex-1 transition-all duration-300 w-full h-full">
          <div class="flex w-full h-full gap-4">

            <div
              class="bg-white rounded-lg shadow-md p-6 w-full md:w-3/4 h-full flex flex-col"
            >

              <div
                *ngIf="!started"
                class="flex flex-col items-center justify-center h-full text-center text-gray-800"
              >
                <h1 class="text-2xl mb-6">What are you working on?</h1>
                <div
                  class="flex items-center w-full max-w-2xl bg-gray-100 rounded-full px-4 py-3 shadow"
                >
                  <input
                    type="text"
                    placeholder="Ask anything"
                    [(ngModel)]="message"
                    (keydown.enter)="sendMessage()"
                    class="flex-1 bg-transparent outline-none px-3 text-sm placeholder-gray-500"
                  />
                </div>
              </div>

    
              <div *ngIf="started" class="flex-1 flex flex-col">
                <div
                  class="flex-1 overflow-y-auto p-4 space-y-3 mb-20 scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200"
                  style="max-height: calc(100vh - 10rem)"
                >
                  <div
                    *ngFor="let msg of messages"
                    [ngClass]="msg.sender === 'user' ? 'text-right' : 'text-left'"
                  >
                    <div
                      [ngClass]="msg.sender === 'user'
                      ? 'inline-block bg-blue-600 text-white px-4 py-2 rounded-2xl'
                      : 'inline-block bg-gray-200 text-gray-800 px-4 py-2 rounded-2xl'"
                    >
                      {{ msg.text }}
                    </div>
                  </div>
                </div>

  
                <div
                  class="absolute bottom-10 left-0 right-0 flex justify-center"
                >
                  <div
                    class="flex items-center w-full max-w-3xl bg-gray-100 rounded-full px-4 py-3 shadow"
                  >
                    <input
                      type="text"
                      placeholder="Ask anything"
                      [(ngModel)]="message"
                      (keydown.enter)="sendMessage()"
                      class="flex-1 bg-transparent outline-none px-3 text-sm placeholder-gray-500"
                    />
                  </div>
                </div>
              </div>
            </div>


            <div
              class="bg-white rounded-lg shadow-md p-6 hidden md:flex md:flex-col md:w-1/4 md:h-full"
            >
              <div class="flex-1 overflow-auto">
                <div class="font-semibold mb-2">AI Assistant Info</div>
                <ul class="space-y-2">
                  <li class="p-2 bg-gray-100 rounded">Session History</li>
                  <li class="p-2 bg-gray-100 rounded">Saved Queries</li>
                  <li class="p-2 bg-gray-100 rounded">Settings</li>
                </ul>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>
  </div>

  <ng-template #paySection>

    <div class="flex flex-col items-center justify-center h-screen gap-6">
      <h2 class="text-2xl mb-4">Choose a Plan to Access AI Chat</h2>
      <div class="flex gap-4">
        <button
          *ngFor="let option of paymentOptions"
          (click)="selectPlan(option)"
          class="px-6 py-3 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
        >
          {{ option.name }} - ₹{{ option.amount / 100 }}
        </button>
      </div>


      <div
        *ngIf="selectedPlan"
        class="mt-6 p-4 bg-white rounded shadow-md w-96"
      >
        <h3 class="text-lg font-semibold mb-2">Confirm Payment</h3>
        <p>Plan: {{ selectedPlan.name }}</p>
        <p>Amount: ₹{{ selectedPlan.amount / 100 }}</p>
        <div class="flex justify-end gap-4 mt-4">
          <button
            (click)="pay(selectedPlan.amount)"
            class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"
          >
            Pay Now
          </button>
          <button
            (click)="selectedPlan = null"
            class="px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>
  </ng-template>
</div> -->

<div *ngIf="loading" class="flex flex-col md:flex-row gap-4 p-6 h-screen">
  <div class="flex-1 space-y-4">
    <div class="bg-gray-200 animate-pulse rounded-lg h-64 w-full"></div>
    <div class="bg-gray-200 animate-pulse rounded-lg h-6 w-3/4"></div>
    <div class="bg-gray-200 animate-pulse rounded-lg h-6 w-5/6"></div>
    <div class="bg-gray-200 animate-pulse rounded-lg h-6 w-2/3"></div>
    <div class="bg-gray-200 animate-pulse rounded-full h-12 w-full mt-4"></div>
  </div>
  <div class="hidden md:block w-1/4 space-y-2">
    <div class="bg-gray-200 animate-pulse rounded-lg h-48 w-full"></div>
    <div class="bg-gray-200 animate-pulse rounded-lg h-32 w-full"></div>
  </div>
</div>

<div *ngIf="!loading">
  <div *ngIf="isPaid; else paySection">

    <div class="flex flex-wrap w-full h-full">
      <div class="w-full">
        <main class="flex-1 transition-all duration-300 w-full h-full">
          <div class="flex w-full h-full gap-4 relative">
            <div
              class="bg-white rounded-lg shadow-md p-6 w-full md:w-3/4 h-full flex flex-col relative"
            >
              <div
                *ngIf="!started"
                class="flex flex-col items-center justify-center h-full text-center text-gray-800"
              >
                <h1 class="text-2xl mb-6">What are you working on?</h1>
                <div
                  class="flex items-center w-full max-w-2xl bg-gray-100 rounded-full px-4 py-3 shadow"
                >
                  <input
                    type="text"
                    placeholder="Ask anything"
                    [(ngModel)]="message"
                    (keydown.enter)="sendMessage()"
                    class="flex-1 bg-transparent outline-none px-3 text-sm placeholder-gray-500"
                  />
                </div>
              </div>

              <div *ngIf="started" class="flex-1 flex flex-col relative">
                <div
                  class="flex-1 overflow-y-auto p-4 space-y-3 mb-20 scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200"
                  style="max-height: calc(100vh - 10rem)"
                >
                  <div
                    *ngFor="let msg of messages"
                    [ngClass]="msg.sender === 'user' ? 'text-right' : 'text-left'"
                  >
                    <div
                      [ngClass]="msg.sender === 'user'
                        ? 'inline-block bg-blue-600 text-white px-4 py-2 rounded-2xl'
                        : 'inline-block bg-gray-200 text-gray-800 px-4 py-2 rounded-2xl'"
                    >
                      {{ msg.text }}
                    </div>
                  </div>
                </div>

                <div
                  class="absolute bottom-10 left-0 right-0 flex justify-center"
                >
                  <div
                    class="flex items-center w-full max-w-3xl bg-gray-100 rounded-full px-4 py-3 shadow"
                  >
                    <input
                      type="text"
                      placeholder="Ask anything"
                      [(ngModel)]="message"
                      (keydown.enter)="sendMessage()"
                      class="flex-1 bg-transparent outline-none px-3 text-sm placeholder-gray-500"
                    />
                  </div>
                </div>
              </div>
            </div>

            <div
              class="bg-white rounded-lg shadow-md p-6 hidden md:flex md:flex-col md:w-1/4 md:h-full"
            >
              <div class="flex-1 overflow-auto">
                <div class="font-semibold mb-2">AI Assistant Info</div>
                <ul class="space-y-2">
                  <li class="p-2 bg-gray-100 rounded">Session History</li>
                  <li class="p-2 bg-gray-100 rounded">Saved Queries</li>
                  <li class="p-2 bg-gray-100 rounded">Settings</li>
                </ul>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>
  </div>

  <ng-template #paySection>
    <!-- Payment Section -->
    <div class="flex flex-col items-center justify-center h-screen gap-6">
      <h2 class="text-2xl mb-4">Choose a Plan to Access AI Chat</h2>
      <div class="flex gap-4">
        <button
          *ngFor="let option of paymentOptions"
          (click)="selectPlan(option)"
          class="px-6 py-3 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
        >
          {{ option.name }} - ₹{{ option.amount / 100 }}
        </button>
      </div>

      <div
        *ngIf="selectedPlan"
        class="mt-6 p-4 bg-white rounded shadow-md w-96"
      >
        <h3 class="text-lg font-semibold mb-2">Confirm Payment</h3>
        <p>Plan: {{ selectedPlan.name }}</p>
        <p>Amount: ₹{{ selectedPlan.amount / 100 }}</p>
        <div class="flex justify-end gap-4 mt-4">
          <button
            (click)="pay(selectedPlan.amount)"
            class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"
          >
            Pay Now
          </button>
          <button
            (click)="selectedPlan = null"
            class="px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>
  </ng-template>
</div>
